# Архитектура FW Visual Flow Studio

## Модули и ответственность
1. **Visual Editor** — визуальное прототипирование, drag & drop, слои, история изменений.
2. **Component Repository** — каталог компонентов, совместимость, версии, рейтинги, статусы.
3. **Scenario Engine** — сценарный рантайм, переходы, условия, фиксация состояния.
4. **Data Model Layer** — единый стор, реактивные подписки и контракты данных.
5. **Test Recorder** — запись действий пользователя и генерация автотестов.
6. **Publish Pipeline** — сборка и публикация в web/desktop/terminal.
7. **Event Router** — маршрутизация событий и интеграций с API.
8. **Render Targets** — адаптеры под разные платформы рендера.

## Поток данных
- Компоненты подписываются на сущности и получают стейт при инициализации.
- События компонентов записываются в сценарии и могут триггерить действия.
- Сценарий хранит стартовое состояние + последовательность действий + финальный стейт.
- Контракты данных фиксируют входы/выходы компонентов для автогенерации документации.

## Публикация
1. Экран собирается в единый JSON-описатель.
2. UI рендерится в целевой платформе (React Web, Desktop shell, Terminal UI).
3. Данные и события остаются едиными, отличия только в адаптационном слое.
4. Контроль версий и миграции компонентов идут через repository registry.

## Обновления, которые стали возможны за последние 10 лет
- **Быстрые сборки**: Vite, SWC, esbuild — мгновенный hot reload и инкрементальная сборка.
- **Новые каналы доставки**: Web + Desktop (Electron/Tauri) + Terminal UI.
- **Observability**: продвинутая телеметрия, трейсинг сценариев, события UI.
- **AI-помощники**: генерация сценариев, документации и тестов.

## Контроль качества архитектуры (чек-лист)
- [ ] Единые контракты данных на компонент и сценарий.
- [ ] Адаптеры рендера для web/desktop/terminal.
- [ ] Автотесты компонентов в UI-слое.
- [ ] Логи событий сценариев и метрики переходов.
- [ ] Регламент версионирования компонентов и миграций.

